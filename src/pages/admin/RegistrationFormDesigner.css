:root {
  --glass-bg: rgba(255,255,255,0.6);
  --glass-border: rgba(255,255,255,0.4);
  --txt: #111827;
  --txt-muted: #6b7280;
  --blue: #2563eb;
  --purple: #7c3aed;
}

[data-theme="dark"] {
  --glass-bg: rgba(46, 58, 78, 0.85);
  --glass-border: rgba(79, 102, 139, 0.5);
  --txt: #f0f4f8;
  --txt-muted: #b5c2d1;
  --blue: #3b82f6;
  --purple: #c084fc;
}

.rfd-page { color: var(--txt); padding: 12px 8px 16px; min-height: 100vh; background: linear-gradient(180deg, rgba(124,58,237,0.06), transparent 220px); display:flex; flex-direction:column; flex:1 1 auto; width:100%; }
.rfd-header { display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; margin-bottom: 12px; }
.rfd-header > div:first-child { flex: 1 0 100%; text-align:center; }
.rfd-title { font-size: 24px; font-weight: 900; margin:0; color: var(--blue); position:relative; }
.rfd-title::after { content:""; position:absolute; bottom:-6px; left:50%; transform:translateX(-50%); width: 180px; height:3px; border-radius:2px; background: linear-gradient(90deg, var(--purple), rgba(124,58,237,0.5)); }
.rfd-sub { color: var(--txt-muted); margin: 6px 0 0 0; text-align:center; }
.rfd-actions { display:flex; gap:8px; justify-content:center; }

.btn { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; border:1px solid var(--glass-border); background: var(--glass-bg); color:var(--txt); cursor:pointer; font-weight: 700; }
.btn.primary { background: linear-gradient(135deg, var(--blue), var(--purple)); color: white; border-color: transparent; }
.btn.ghost { background: #fff; }

/* Events grid */
.rfd-events { margin-bottom: 12px; }
.rfd-event-grid { display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 12px; }
@media (max-width: 1100px) { .rfd-event-grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
@media (max-width: 640px) { .rfd-event-grid { grid-template-columns: 1fr; } }
.rfd-event-card { border:1px solid var(--glass-border); background: var(--glass-bg); border-radius:14px; overflow:hidden; cursor:pointer; padding:0; text-align:left; box-shadow: 0 8px 22px rgba(0,0,0,0.06); }
.rfd-event-card:hover { transform: translateY(-1px); transition: transform .15s ease; }
.rfd-event-img { height: 120px; background-size:cover; background-position:center; }
.rfd-event-info { padding: 10px; }
.rfd-event-name { margin:0; font-size: 16px; font-weight: 900; color: var(--txt); }
.rfd-event-meta { margin-top:4px; color: var(--txt-muted); font-weight:700; font-size: 12px; }

/* Main grid */
.rfd-grid { display:grid; grid-template-columns: 260px 1fr 340px; gap: 12px; align-items:start; }
@media (max-width: 1100px) { .rfd-grid { grid-template-columns: 1fr; } }

/* Palette */
.rfd-palette, .rfd-builder, .rfd-preview .preview-card { border:1px solid var(--glass-border); background: var(--glass-bg); border-radius:14px; backdrop-filter: blur(10px); box-shadow: 0 8px 22px rgba(0,0,0,0.06); }
.rfd-palette { padding: 12px; }
.rfd-palette h3 { margin: 0 0 8px; }
.rfd-palette-grid { display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 8px; }
.chip { padding:8px 10px; border-radius:10px; background:#fff; border:1px solid var(--glass-border); cursor:pointer; display:inline-flex; align-items:center; gap:6px; font-weight:700; }

.rfd-form-meta { display:grid; gap:8px; margin-top: 10px; }
.rfd-form-meta label { display:grid; gap:6px; font-weight:700; color: var(--txt); }
.rfd-form-meta input { padding:8px 10px; border-radius:10px; border:1px solid var(--glass-border); background:#fff; color:var(--txt); }

/* Builder */
.rfd-builder { padding: 10px; min-height: 320px; }
.rfd-empty { text-align:center; color: var(--txt-muted); padding: 18px; }
.rfd-item { border:1px solid var(--glass-border); border-radius:12px; background:#fff; padding:10px; margin-bottom:8px; }
.rfd-item.active { outline: 2px solid rgba(124,58,237,0.5); }
.rfd-item-row { display:flex; align-items:center; justify-content:space-between; gap:8px; }
.rfd-item-actions { display:flex; gap:6px; }
.rfd-item-actions button { width:32px; height:32px; border-radius:8px; border:1px solid var(--glass-border); background: var(--glass-bg); cursor:pointer; display:inline-flex; align-items:center; justify-content:center; }
.rfd-item-actions .danger { background: #fff0f0; border-color: #ffc7c7; color: #b91c1c; }
.rfd-edit-grid { display:grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap:8px; margin-top:8px; align-items:end; }
.rfd-edit-grid label { display:grid; gap:6px; font-weight:700; color: var(--txt); }
.rfd-edit-grid input { padding:8px 10px; border-radius:10px; border:1px solid var(--glass-border); background:#fff; color:var(--txt); }
.rfd-row-inline { display:inline-flex !important; align-items:center; gap:8px; }
.rfd-type-tag { justify-self:end; font-size:12px; color: var(--txt-muted); font-weight:700; }

/* Preview */
.preview-card { padding: 12px; }
.pv-title { margin: 0; font-size: 18px; font-weight:900; color: var(--blue); }
.pv-sub { margin: 4px 0 10px; color: var(--txt-muted); }
.pv-form { display:grid; gap:10px; }
.rfd-form-row { display:grid; gap:6px; }
.rfd-label { font-weight:800; color: var(--txt); }
.rfd-label .req { color: #dc2626; margin-left:4px; }
.rfd-input { padding: 10px 12px; border-radius:10px; border:1px solid var(--glass-border); background:#fff; color: var(--txt); }
.pv-actions { display:flex; justify-content:flex-end; }
/* Payment subgroup */
.rfd-subgroup { display:grid; gap:8px; margin-top: 6px; }
.rfd-sublabel { font-weight:700; color: var(--txt-muted); font-size: 12px; }
.rfd-qr-preview { width: 220px; max-width: 100%; height: auto; border-radius: 10px; border:1px solid var(--glass-border); background: #fff; }

/* Modal */
.rfd-modal { position: fixed; inset: 0; z-index: 2000; }
.rfd-modal__backdrop { position:absolute; inset:0; background: rgba(0,0,0,0.45); backdrop-filter: blur(2px); }
.rfd-modal__panel { position: relative; z-index: 2001; margin: 4vh auto; max-width: 1200px; background: var(--glass-bg); border:1px solid var(--glass-border); border-radius: 16px; overflow: auto; max-height: 90vh; display:flex; flex-direction:column; box-shadow: 0 25px 60px rgba(0,0,0,0.25); }
.rfd-modal__header { display:flex; align-items:center; justify-content:space-between; gap: 12px; padding: 10px 12px; border-bottom:1px solid var(--glass-border); }
.rfd-modal__title { display:flex; align-items:center; gap:10px; }
.rfd-modal__title img { width: 48px; height: 48px; border-radius: 10px; object-fit: cover; border:1px solid var(--glass-border); }
